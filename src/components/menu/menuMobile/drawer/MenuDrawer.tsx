import { useState } from 'react'
import { Sheet } from 'react-modal-sheet';
import { useCategorys } from '../../../../context/CategoryProvider';
import { Link } from 'react-router';
import ScrollableItems from './ScrollableItems';
import toast from 'react-hot-toast';

export default function MenuDrawer() {

    const { categorys, brands, isCategorysLoading } = useCategorys();
    const [isOpen, setOpen] = useState<boolean>(false)

    return (
        <>
            <div onClick={() => setOpen(true)} className="w-1/4 h-full flex items-center justify-center flex-col gap-2 pt-1 cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" className="size-[21px] fill-gray-500" viewBox="0 0 24 24" width="512"
                    height="512">
                    <path
                        d="M7,0H4A4,4,0,0,0,0,4V7a4,4,0,0,0,4,4H7a4,4,0,0,0,4-4V4A4,4,0,0,0,7,0ZM9,7A2,2,0,0,1,7,9H4A2,2,0,0,1,2,7V4A2,2,0,0,1,4,2H7A2,2,0,0,1,9,4Z" />
                    <path
                        d="M7,13H4a4,4,0,0,0-4,4v3a4,4,0,0,0,4,4H7a4,4,0,0,0,4-4V17A4,4,0,0,0,7,13Zm2,7a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V17a2,2,0,0,1,2-2H7a2,2,0,0,1,2,2Z" />
                    <path
                        d="M20,13H17a4,4,0,0,0-4,4v3a4,4,0,0,0,4,4h3a4,4,0,0,0,4-4V17A4,4,0,0,0,20,13Zm2,7a2,2,0,0,1-2,2H17a2,2,0,0,1-2-2V17a2,2,0,0,1,2-2h3a2,2,0,0,1,2,2Z" />
                    <path d="M14,7h3v3a1,1,0,0,0,2,0V7h3a1,1,0,0,0,0-2H19V2a1,1,0,0,0-2,0V5H14a1,1,0,0,0,0,2Z" />
                </svg>
                <span className="text-gray-500 font-medium text-[15px] transition-all">منو</span>
            </div>
            <Sheet
                isOpen={isOpen}
                onClose={() => setOpen(false)}
                detent="content-height"
                tweenConfig={{
                    ease: "linear",
                    duration: 0.4
                }}
            >
                <Sheet.Container>
                    <Sheet.Header />
                    <Sheet.Content>
                        <div className="w-full overflow-y-custom flex items-center justify-start flex-col gap-6 pt-2 px-4 pb-10">
                            <ScrollableItems title='دسته بندی' loading={isCategorysLoading} list={categorys} keyItem='category' onSheetClose={() => setOpen(false)}>
                                <svg xmlns="http://www.w3.org/2000/svg" className='size-5 fill-theme -translate-y-[1.2px]' data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M23.61,10.836l-1.718-3.592c-.218-.455-.742-.678-1.219-.517l-8.677,2.896L3.307,6.728c-.477-.159-1.001,.062-1.219,.518L.436,10.719c-.477,.792-.567,1.743-.247,2.609,.31,.84,.964,1.491,1.801,1.795l-.006,2.315c0,2.157,1.373,4.065,3.419,4.747l4.365,1.456c.714,.237,1.464,.356,2.214,.356s1.5-.119,2.214-.357l4.369-1.456c2.044-.682,3.418-2.586,3.419-4.738l.006-2.322c.846-.296,1.508-.945,1.819-1.788,.316-.858,.228-1.8-.198-2.5Zm-21.416,.83l1.318-2.763,7.065,2.354-1.62,3.256c-.242,.406-.729,.584-1.174,.436l-5.081-1.695c-.298-.099-.53-.324-.639-.618-.108-.293-.078-.616,.13-.97Zm3.842,8.623c-1.228-.41-2.053-1.555-2.052-2.848l.004-1.65,3.164,1.055c1.346,.446,2.793-.09,3.559-1.372l.277-.555-.004,6.979c-.197-.04-.391-.091-.582-.154l-4.365-1.455Zm11.896-.002l-4.369,1.456c-.19,.063-.384,.115-.58,.155l.004-6.995,.319,.64c.557,.928,1.532,1.46,2.562,1.46,.318,0,.643-.051,.96-.157l3.16-1.053-.004,1.651c0,1.292-.825,2.435-2.052,2.844Zm4-7.645c-.105,.285-.331,.504-.619,.601l-5.118,1.705c-.438,.147-.935-.036-1.136-.365l-1.654-3.322,7.064-2.357,1.382,2.88c.156,.261,.187,.574,.081,.859ZM5.214,5.896c-.391-.391-.391-1.023,0-1.414L9.111,.586c.779-.779,2.049-.779,2.828,0l1.596,1.596c.753-.385,1.738-.27,2.353,.345l2.255,2.255c.391,.391,.391,1.023,0,1.414s-1.023,.391-1.414,0l-2.255-2.255-3.151,3.151c-.195,.195-.451,.293-.707,.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l2.147-2.147-1.53-1.53-3.897,3.896c-.195,.195-.451,.293-.707,.293s-.512-.098-.707-.293Z" /></svg>
                            </ScrollableItems>
                            <ScrollableItems title='برند ها' loading={isCategorysLoading} list={brands} keyItem='brand' onSheetClose={() => setOpen(false)}>
                                <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"
                                    className='size-5 fill-theme -translate-y-[1.2px]'>
                                    <path
                                        d="m22.576,12.52L13.849,3.85c-.842-.835-2.046-1.243-3.221-1.09l-5.803.651L1.707.293C1.316-.098.684-.098.293.293S-.098,1.316.293,1.707l3.118,3.118-.696,6.088c-.091,1.142.323,2.258,1.136,3.062l8.713,8.645c.91.906,2.118,1.404,3.4,1.404h.02c1.29-.005,2.5-.513,3.408-1.431l3.21-3.242c1.87-1.89,1.859-4.955-.025-6.832Zm-1.396,5.426l-3.21,3.242c-.531.537-1.239.834-1.994.837h-.011c-.751,0-1.458-.292-1.992-.823L5.259,12.555c-.394-.39-.594-.93-.554-1.449l.512-4.474,1.857,1.857c-.044.164-.074.334-.074.512,0,1.105.895,2,2,2s2-.895,2-2-.895-2-2-2c-.178,0-.347.031-.512.074l-1.854-1.854,4.226-.474.021-.003c.568-.075,1.151.122,1.559.525l8.726,8.668c1.105,1.102,1.112,2.899.015,4.009Zm-3.974-5.151c-.391-.391-1.023-.391-1.414,0l-3,3c-.391.391-.391,1.023,0,1.414l2.5,2.5c.195.195.451.293.707.293s.512-.098.707-.293l3-3c.391-.391.391-1.023,0-1.414l-2.5-2.5Zm-1.207,4.793l-1.086-1.086,1.586-1.586,1.086,1.086-1.586,1.586Z" />
                                </svg>
                            </ScrollableItems>

                            <div className="w-full flex flex-col gap-3">
                                <p className='text-dark-500 font-bold text-[16px] flex items-center justify-start gap-2 mb-2'>
                                    <svg xmlns="http://www.w3.org/2000/svg" className='size-[18px] fill-theme -translate-y-[1px]' data-name="Layer 1" viewBox="0 0 24 24">
                                        <path d="m22.634,7.967c1.819-1.82,1.818-4.78,0-6.6-.881-.882-2.053-1.367-3.3-1.367s-2.419.485-3.3,1.367l-2.667,2.666c-1.576,1.577-1.781,4.007-.626,5.812l-.447.447c-.391.391-.391,1.023,0,1.414.195.195.451.293.707.293s.512-.098.707-.293l.448-.448c.744.478,1.606.741,2.512.741,1.247,0,2.419-.485,3.3-1.367l2.667-2.666Zm-6.997,1.81l2.07-2.07c.391-.391.391-1.023,0-1.414s-1.023-.391-1.414,0l-2.079,2.079c-.409-.97-.222-2.135.567-2.924l2.667-2.666c.503-.504,1.173-.781,1.885-.781s1.382.277,1.886.781c1.04,1.039,1.039,2.731,0,3.771l-2.667,2.666c-.76.76-1.945.945-2.915.558ZM2.793,4.207c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2,2c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2-2Zm5.207-1.207V1c0-.553.448-1,1-1s1,.447,1,1v2c0,.553-.448,1-1,1s-1-.447-1-1ZM0,9c0-.553.448-1,1-1h2c.552,0,1,.447,1,1s-.448,1-1,1H1c-.552,0-1-.447-1-1Zm21.207,10.793c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-2-2c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2,2Zm-5.207,1.207v2c0,.553-.448,1-1,1s-1-.447-1-1v-2c0-.553.448-1,1-1s1,.447,1,1Zm8-6c0,.553-.448,1-1,1h-2c-.552,0-1-.447-1-1s.448-1,1-1h2c.552,0,1,.447,1,1Zm-12.293-2.707c-.391-.391-1.023-.391-1.414,0l-.448.448c-.744-.478-1.606-.741-2.512-.741-1.247,0-2.419.485-3.3,1.367l-2.667,2.666c-1.819,1.82-1.818,4.78,0,6.6.881.882,2.053,1.367,3.3,1.367s2.419-.485,3.3-1.367l2.667-2.666c1.576-1.577,1.781-4.007.626-5.812l.447-.447c.391-.391.391-1.023,0-1.414Zm-2.488,6.26l-2.667,2.666c-1.007,1.007-2.763,1.008-3.771,0-1.04-1.039-1.039-2.731,0-3.771l2.667-2.666c.503-.504,1.173-.781,1.885-.781.364,0,.715.074,1.04.212l-2.081,2.081c-.391.391-.391,1.023,0,1.414.195.195.451.293.707.293s.512-.098.707-.293l2.079-2.079c.409.97.222,2.135-.567,2.924Z" />
                                    </svg>
                                    دسترسی سریع
                                </p>

                                <Link onClick={() => setOpen(false)} to="/products" className='w-full p-3 border border-gray-200 rounded-lg flex items-center justify-between'>
                                    <div className="flex items-center justify-start gap-2">
                                        <div className="size-9 bg-gray-100 rounded-md flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" className="size-4 fill-dark-500" id="Outline" viewBox="0 0 24 24" width="512" height="512"><path d="M24,10a.988.988,0,0,0-.024-.217l-1.3-5.868A4.968,4.968,0,0,0,17.792,0H6.208a4.968,4.968,0,0,0-4.88,3.915L.024,9.783A.988.988,0,0,0,0,10v1a3.984,3.984,0,0,0,1,2.643V19a5.006,5.006,0,0,0,5,5H18a5.006,5.006,0,0,0,5-5V13.643A3.984,3.984,0,0,0,24,11ZM2,10.109l1.28-5.76A2.982,2.982,0,0,1,6.208,2H7V5A1,1,0,0,0,9,5V2h6V5a1,1,0,0,0,2,0V2h.792A2.982,2.982,0,0,1,20.72,4.349L22,10.109V11a2,2,0,0,1-2,2H19a2,2,0,0,1-2-2,1,1,0,0,0-2,0,2,2,0,0,1-2,2H11a2,2,0,0,1-2-2,1,1,0,0,0-2,0,2,2,0,0,1-2,2H4a2,2,0,0,1-2-2ZM18,22H6a3,3,0,0,1-3-3V14.873A3.978,3.978,0,0,0,4,15H5a3.99,3.99,0,0,0,3-1.357A3.99,3.99,0,0,0,11,15h2a3.99,3.99,0,0,0,3-1.357A3.99,3.99,0,0,0,19,15h1a3.978,3.978,0,0,0,1-.127V19A3,3,0,0,1,18,22Z" /></svg>
                                        </div>
                                        <p className='text-[16px] font-bold text-dark-500'>فروشگاه</p>
                                    </div>
                                    <svg xmlns="http://www.w3.org/2000/svg" className='size-6 fill-gray-400' id="Outline" viewBox="0 0 24 24" width="512" height="512"><path d="M19,11H9l3.29-3.29a1,1,0,0,0,0-1.42,1,1,0,0,0-1.41,0l-4.29,4.3A2,2,0,0,0,6,12H6a2,2,0,0,0,.59,1.4l4.29,4.3a1,1,0,1,0,1.41-1.42L9,13H19a1,1,0,0,0,0-2Z" /></svg>
                                </Link>
                                <div onClick={() => toast.error("این بخش هنوز راه اندازی نشده")} className='w-full cursor-pointer p-3 border border-gray-200 rounded-lg flex items-center justify-between'>
                                    <div className="flex items-center justify-start gap-2">
                                        <div className="size-9 bg-gray-100 rounded-md flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg"  className="size-4 fill-dark-500" id="Outline" viewBox="0 0 24 24" width="512" height="512"><path d="M21,12.424V11A9,9,0,0,0,3,11v1.424A5,5,0,0,0,5,22a2,2,0,0,0,2-2V14a2,2,0,0,0-2-2V11a7,7,0,0,1,14,0v1a2,2,0,0,0-2,2v6H14a1,1,0,0,0,0,2h5a5,5,0,0,0,2-9.576ZM5,20H5a3,3,0,0,1,0-6Zm14,0V14a3,3,0,0,1,0,6Z" /></svg>
                                        </div>
                                        <p className='text-[16px] font-bold text-dark-500'>ارتباط با ما</p>
                                    </div>
                                    <svg xmlns="http://www.w3.org/2000/svg" className='size-6 fill-gray-400' id="Outline" viewBox="0 0 24 24" width="512" height="512"><path d="M19,11H9l3.29-3.29a1,1,0,0,0,0-1.42,1,1,0,0,0-1.41,0l-4.29,4.3A2,2,0,0,0,6,12H6a2,2,0,0,0,.59,1.4l4.29,4.3a1,1,0,1,0,1.41-1.42L9,13H19a1,1,0,0,0,0-2Z" /></svg>
                                </div>
                            </div>
                        </div>
                    </Sheet.Content>
                </Sheet.Container>
                <Sheet.Backdrop onTap={() => setOpen(false)} />
            </Sheet >
        </>
    )
}